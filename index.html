<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RCM Naye Bharat Ka Nirman Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --primary-color: #000080; /* Navy Blue (Chakra Color) */
            --saffron: #FF9933;
            --white: #FFFFFF;
            --green: #138808;
            --secondary-color: #e3f2fd;
            --text-color: #333;
            --border-radius: 12px;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f4f6f8;
            margin: 0;
            padding: 10px;
            color: var(--text-color);
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        /* --- FLAG ANIMATION HEADER START --- */
        .flag-header-container {
            position: relative;
            background: linear-gradient(120deg, var(--saffron) 33%, var(--white) 33%, var(--white) 66%, var(--green) 66%);
            padding: 30px 10px;
            text-align: center;
            border-radius: 12px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        /* Flowing Effect Overlay */
        .flag-wave {
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background: linear-gradient(to right, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.3) 50%, 
                rgba(255,255,255,0) 100%);
            transform: skewX(-20deg);
            animation: flowFlag 3s linear infinite;
        }

        @keyframes flowFlag {
            0% { left: -150%; }
            100% { left: 150%; }
        }

        .header-title {
            position: relative;
            z-index: 2;
            color: var(--primary-color);
            font-size: 2rem;
            font-weight: 900;
            text-transform: uppercase;
            text-shadow: 2px 2px 0px #ffffff, -1px -1px 0px #ffffff;
            margin: 0;
            letter-spacing: 1px;
        }

        .header-subtitle {
            position: relative;
            z-index: 2;
            color: #333;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.8);
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            margin-top: 5px;
            font-size: 0.9rem;
        }
        /* --- FLAG ANIMATION END --- */

        .date-container {
            background: var(--primary-color);
            padding: 10px;
            border-radius: 8px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }

        .date-container input {
            padding: 5px;
            border-radius: 4px;
            border: none;
            font-weight: bold;
        }

        /* Sections */
        .gases-section {
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            background: #fff;
        }

        .section-header {
            background-color: var(--secondary-color);
            padding: 10px 15px;
            display: flex;
            align-items: center;
            font-weight: bold;
            color: var(--primary-color);
        }

        .letter-icon {
            background: var(--primary-color);
            color: white;
            width: 28px;
            height: 28px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-right: 10px;
        }

        .sub-task-list { padding: 10px 15px; }

        .task-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #eee;
            justify-content: space-between;
        }
        .task-item:last-child { border-bottom: none; }

        .task-left { display: flex; align-items: center; flex: 1; }
        .task-item input[type="checkbox"] { width: 18px; height: 18px; margin-right: 10px; }

        .num-input {
            width: 60px; padding: 5px; border: 2px solid var(--primary-color);
            border-radius: 5px; text-align: center; font-weight: bold; margin-left: 10px;
        }

        .task-label { font-size: 0.9rem; cursor: pointer; }
        .task-category { font-size: 0.7rem; color: #ff6f00; font-weight: bold; display: block; }
        .select-target { padding: 5px; border-radius: 5px; border: 1px solid #ccc; }

        .btn-submit {
            background: var(--primary-color); color: white; border: none;
            padding: 15px; width: 100%; border-radius: 50px; font-weight: bold;
            cursor: pointer; margin-top: 15px;
        }
        .btn-pdf { background: #d32f2f; margin-top: 10px; }

        #resultArea {
            display: none; margin-top: 15px; padding: 15px;
            background: #fff3e0; border-left: 5px solid #ff9800; border-radius: 5px;
        }
        
        #saveStatus { text-align: right; font-size: 0.8rem; color: green; height: 20px; }
    </style>
</head>
<body>

<div class="container" id="reportContent">
    
    <div class="flag-header-container">
        <div class="flag-wave"></div> <h1 class="header-title">üáÆüá≥ ‡§®‡§è ‡§≠‡§æ‡§∞‡§§ ‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ üáÆüá≥</h1>
        <div class="header-subtitle">RCM GASES Success Tracker</div>
    </div>

    <div class="date-container" data-html2canvas-ignore="true">
        <label>‡§§‡§æ‡§∞‡•Ä‡§ñ (Date): </label>
        <input type="date" id="reportDate" onchange="loadDataByDate()">
    </div>
    
    <div id="saveStatus"></div>

    <form id="trackerForm">
        
        <div class="gases-section">
            <div class="section-header">
                <div><span class="letter-icon">G</span> ‡§ó‡•ç‡§∞‡•ã‡§• (Growth)</div>
            </div>
            <div class="sub-task-list">
                <div class="task-item">
                    <div class="task-left">
                        <label class="task-label"><span class="task-category">TARGET</span>‡§Æ‡§π‡§ø‡§®‡•ç‡§Ø‡§æ‡§ö‡•á ‡§ó‡•ç‡§∞‡•ã‡§• ‡§ü‡§æ‡§∞‡•ç‡§ó‡•á‡§ü</label>
                    </div>
                    <select id="growthTarget" class="select-target" onchange="autoSave()">
                        <option value="0">Normal</option>
                        <option value="25">25% Growth</option>
                        <option value="50">50% Growth</option>
                        <option value="100">100% (Double)</option>
                    </select>
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <label class="task-label"><span class="task-category">SHOW THE PLAN</span>‡§Ü‡§ú ‡§ï‡§ø‡§§‡•Ä ‡§™‡•ç‡§≤‡§æ‡§® (Plan) ‡§¶‡§æ‡§ñ‡§µ‡§≤‡•á?</label>
                    </div>
                    <input type="number" id="numPlan" class="num-input" placeholder="0" min="0" oninput="autoSave()">
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="g_vital" class="track-check" onchange="autoSave()">
                        <label for="g_vital" class="task-label"><span class="task-category">NEW VITAL</span>‡§®‡§µ‡•Ä‡§® Vital Achiever ‡§∏‡§æ‡§†‡•Ä ‡§ï‡§æ‡§Æ?</label>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="g_display" class="track-check" onchange="autoSave()">
                        <label for="g_display" class="task-label"><span class="task-category">NEW STATION</span>‡§®‡§µ‡•Ä‡§® Display Wall / ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§∏‡•Å‡§∞‡•Å ‡§ï‡•á‡§≤‡•á?</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="gases-section">
            <div class="section-header">
                <div><span class="letter-icon">A</span> ‡§è‡§ï‡•ç‡§ü‡§ø‡§µ ‡§¶‡§∞ (Active Rate)</div>
            </div>
            <div class="sub-task-list">
                <div class="task-item">
                    <div class="task-left">
                        <label class="task-label"><span class="task-category">CALLING</span>‡§´‡•â‡§≤‡•ã-‡§Ö‡§™ ‡§ï‡•â‡§≤‡•ç‡§∏ (Calls)?</label>
                    </div>
                    <input type="number" id="numCalls" class="num-input" placeholder="0" min="0" oninput="autoSave()">
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <label class="task-label"><span class="task-category">MEETINGS</span>‡§π‡•ã‡§Æ / ‡§µ‡•á‡§≤‡§ï‡§Æ ‡§Æ‡•Ä‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏?</label>
                    </div>
                    <input type="number" id="numMeetings" class="num-input" placeholder="0" min="0" oninput="autoSave()">
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="a_ulp" class="track-check" onchange="autoSave()">
                        <label for="a_ulp" class="task-label"><span class="task-category">ULP QUICK</span>ULP (Unique Login Point) ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§ö‡•á‡§ï ‡§ï‡•á‡§≤‡•Ä?</label>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="a_first_purchase" class="track-check" onchange="autoSave()">
                        <label for="a_first_purchase" class="task-label"><span class="task-category">FIRST PURCHASE</span>‡§®‡§µ‡•Ä‡§® ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡•Ä‡§ö‡•Ä ‡§™‡§π‡§ø‡§≤‡•Ä ‡§ñ‡§∞‡•á‡§¶‡•Ä?</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="gases-section">
            <div class="section-header">
                <div><span class="letter-icon">S</span> ‡§∏‡•ç‡§µ‡§Ø‡§Ç ‡§ï‡•Ä ‡§ñ‡§∞‡•Ä‡§¶ (Self Use)</div>
            </div>
            <div class="sub-task-list">
                <div class="task-item">
                    <div class="task-left">
                        <label class="task-label"><span class="task-category">SALES / PV</span>‡§Ü‡§ú‡§ö‡•Ä ‡§µ‡§ø‡§ï‡•ç‡§∞‡•Ä (Selling/Self ID) ‚Çπ?</label>
                    </div>
                    <input type="number" id="numPV" class="num-input" placeholder="‚Çπ" min="0" oninput="autoSave()">
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="s_online" class="track-check" onchange="autoSave()">
                        <label for="s_online" class="task-label"><span class="task-category">ONLINE ORDER</span>‡§∏‡•ç‡§µ‡§§‡§É‡§ö‡•Ä ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ë‡§®‡§≤‡§æ‡§à‡§® ‡§ü‡§æ‡§ï‡§≤‡•Ä?</label>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="s_billing" class="track-check" onchange="autoSave()">
                        <label for="s_billing" class="task-label"><span class="task-category">BILLING</span>‡§π‡§æ‡§•‡•ã‡§π‡§æ‡§• (Immediate) ‡§¨‡§ø‡§≤‡§ø‡§Ç‡§ó ‡§ï‡•á‡§≤‡•á?</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="gases-section">
            <div class="section-header">
                <div><span class="letter-icon">E</span> ‡§è‡§ï ‡§∞‡•Ç‡§™ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ (Education)</div>
            </div>
            <div class="sub-task-list">
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="e_learn" class="track-check" onchange="autoSave()">
                        <label for="e_learn" class="task-label"><span class="task-category">LEARNING</span>‡§ó‡•Å‡§∞‡•Å‡§ï‡•Å‡§≤ / ‡§â‡§°‡§æ‡§® ‡§µ‡•ç‡§π‡§ø‡§°‡§ø‡§ì ‡§™‡§æ‡§π‡§ø‡§≤‡§æ?</label>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="e_teach" class="track-check" onchange="autoSave()">
                        <label for="e_teach" class="task-label"><span class="task-category">TEACHING</span>‡§ü‡•Ä‡§Æ ‡§ü‡•ç‡§∞‡•á‡§®‡§ø‡§Ç‡§ó (Duplication) ‡§¶‡§ø‡§≤‡•á?</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="gases-section">
            <div class="section-header">
                <div><span class="letter-icon">S</span> ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§¶‡§æ‡§Ø‡§∞‡§æ (Social)</div>
            </div>
            <div class="sub-task-list">
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="so_relation" class="track-check" onchange="autoSave()">
                        <label for="so_relation" class="task-label"><span class="task-category">RELATION</span>‡§®‡§æ‡§§‡•á‡§µ‡§æ‡§à‡§ï/‡§Æ‡§ø‡§§‡•ç‡§∞ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï (Non-Business)?</label>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="so_forgive" class="track-check" onchange="autoSave()">
                        <label for="so_forgive" class="task-label"><span class="task-category">FORGIVENESS</span>‡§Æ‡§®‡§æ‡§§‡•Ä‡§≤ ‡§∞‡§æ‡§ó ‡§∏‡•ã‡§°‡•Ç‡§® ‡§¶‡§ø‡§≤‡§æ (Forgiveness)?</label>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-left">
                        <input type="checkbox" id="so_health" class="track-check" onchange="autoSave()">
                        <label for="so_health" class="task-label"><span class="task-category">HEALTH/SEVA</span>‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø (Health) ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§∏‡•á‡§µ‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø?</label>
                    </div>
                </div>
            </div>
        </div>

        <div id="resultArea">
            <strong>üìä AI ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ (Analysis):</strong>
            <p id="analysisText">...</p>
        </div>

    </form>
</div>

<div class="container" style="background: transparent; box-shadow: none; margin-top: 0; padding-top: 0;">
    <button type="button" class="btn-submit" onclick="calculateAndShow()">üîç Calculate & Show Analysis</button>
    <button type="button" class="btn-submit btn-pdf" onclick="downloadPDF()">üì• Download PDF Report</button>
</div>

<script>
    const dateInput = document.getElementById('reportDate');
    const statusMsg = document.getElementById('saveStatus');

    dateInput.valueAsDate = new Date();
    
    window.onload = function() { loadDataByDate(); };

    function autoSave() {
        const dateKey = 'rcm_data_' + dateInput.value;
        const data = {
            target: document.getElementById('growthTarget').value,
            plans: document.getElementById('numPlan').value,
            calls: document.getElementById('numCalls').value,
            meetings: document.getElementById('numMeetings').value,
            pv: document.getElementById('numPV').value,
            g_vital: document.getElementById('g_vital').checked,
            g_display: document.getElementById('g_display').checked,
            a_ulp: document.getElementById('a_ulp').checked,
            a_first_purchase: document.getElementById('a_first_purchase').checked,
            s_online: document.getElementById('s_online').checked,
            s_billing: document.getElementById('s_billing').checked,
            e_learn: document.getElementById('e_learn').checked,
            e_teach: document.getElementById('e_teach').checked,
            so_relation: document.getElementById('so_relation').checked,
            so_forgive: document.getElementById('so_forgive').checked,
            so_health: document.getElementById('so_health').checked
        };
        localStorage.setItem(dateKey, JSON.stringify(data));
        statusMsg.innerText = "Saving... ‚úî";
        setTimeout(() => statusMsg.innerText = "", 1500);
    }

    function loadDataByDate() {
        const dateKey = 'rcm_data_' + dateInput.value;
        const savedData = localStorage.getItem(dateKey);
        document.getElementById('resultArea').style.display = 'none';

        if (savedData) {
            const data = JSON.parse(savedData);
            document.getElementById('growthTarget').value = data.target || 0;
            document.getElementById('numPlan').value = data.plans || "";
            document.getElementById('numCalls').value = data.calls || "";
            document.getElementById('numMeetings').value = data.meetings || "";
            document.getElementById('numPV').value = data.pv || "";
            document.getElementById('g_vital').checked = data.g_vital || false;
            document.getElementById('g_display').checked = data.g_display || false;
            document.getElementById('a_ulp').checked = data.a_ulp || false;
            document.getElementById('a_first_purchase').checked = data.a_first_purchase || false;
            document.getElementById('s_online').checked = data.s_online || false;
            document.getElementById('s_billing').checked = data.s_billing || false;
            document.getElementById('e_learn').checked = data.e_learn || false;
            document.getElementById('e_teach').checked = data.e_teach || false;
            document.getElementById('so_relation').checked = data.so_relation || false;
            document.getElementById('so_forgive').checked = data.so_forgive || false;
            document.getElementById('so_health').checked = data.so_health || false;
        } else {
            document.getElementById('trackerForm').reset();
            document.getElementById('growthTarget').value = "0";
        }
    }

    function calculateAndShow() {
        let score = 0;
        let plans = parseInt(document.getElementById('numPlan').value) || 0;
        let calls = parseInt(document.getElementById('numCalls').value) || 0;
        let meetings = parseInt(document.getElementById('numMeetings').value) || 0;
        let pv = parseInt(document.getElementById('numPV').value) || 0;

        score += Math.min(plans * 10, 30);
        score += Math.min(meetings * 15, 30);
        score += Math.min(calls * 2, 10);
        score += Math.min(pv / 100, 10);

        let checkboxes = document.querySelectorAll('.track-check');
        let checkedCount = 0;
        checkboxes.forEach(box => { if(box.checked) checkedCount++; });
        score += (checkedCount * 3);

        if(score > 100) score = 100;

        let feedback = `Total Score: <strong style="font-size:1.3rem; color:${score < 50 ? 'red' : 'green'}">${Math.round(score)}/100</strong><br><br>`;
        
        if(plans === 0 && meetings === 0) feedback += "üî¥ <strong>Action:</strong> ‡§´‡§ø‡§≤‡•ç‡§° ‡§µ‡§∞‡•ç‡§ï ‡§ù‡§ø‡§∞‡•ã ‡§Ü‡§π‡•á. ‡§ó‡•ç‡§∞‡•ã‡§• ‡§•‡§æ‡§Ç‡§¨‡§≤‡•Ä ‡§Ü‡§π‡•á.<br>";
        else feedback += "üü¢ <strong>Good:</strong> ‡§´‡§ø‡§≤‡•ç‡§° ‡§µ‡§∞‡•ç‡§ï ‡§ö‡§æ‡§≤‡•Ç ‡§Ü‡§π‡•á.<br>";

        if(score > 80) feedback += "üèÜ <strong>Victory:</strong> ‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä '‡§®‡§è ‡§≠‡§æ‡§∞‡§§ ‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£' ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏ ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§Ü‡§π‡§æ‡§§!";
        else if(score < 40) feedback += "‚ö†Ô∏è <strong>Alert:</strong> ‡§ï‡§æ‡§Æ ‡§µ‡§æ‡§¢‡§µ‡§æ, ‡§®‡§æ‡§π‡•Ä‡§§‡§∞ ‡§Æ‡§æ‡§ó‡•á ‡§™‡§°‡§æ‡§≤.";

        document.getElementById('analysisText').innerHTML = feedback;
        document.getElementById('resultArea').style.display = 'block';
    }

    function downloadPDF() {
        calculateAndShow();
        const element = document.getElementById('reportContent');
        const dateVal = dateInput.value;
        const opt = {
            margin: 0.3,
            filename: `RCM_Naye_Bharat_${dateVal}.pdf`,
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
        };
        html2pdf().set(opt).from(element).save();
    }
</script>

</body>
</html>
